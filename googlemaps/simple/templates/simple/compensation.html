<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

<form id="compensation_form" method="post">
    {% csrf_token %}
    Choose the competency level:
    <select name="level">
        <option value="ceo">CEO/President</option>
        <option value="vp">VP</option>
        <option value="lead">Team Leader</option>
        <option value="professional">Professional</option>
    </select>
    <br/>
    Salary per year:
    <input type="number" name="salary" value="70000"/>
    <br/>
    Years of service:
    <input type="number" name="years" value="10"/>
    <br/>
    <input type="submit" value="Predict Compensation in Months">
</form>

Compensation is : 
<div id="compensation_value"></div>
<script>
    $("#compensation_form").submit(function (event) {
      console.log($('[name="level"]').val());
      process_compensation();
      event.preventDefault();
    });

    function process_compensation()
    {
        console.log("Level=", $('[name="level"]').val());
        console.log("Salary=", $('[name="salary"]').val());
        console.log("Salary=", $('[name="years"]').val());
        $.ajax(
        {
            url : "{% url 'process-compensation' %}", 
            type : "POST",
            data : {    
                        level : $('[name="level"]').val(),  
                        salary : $('[name="salary"]').val(),
                        years : $('[name="years"]').val(),
                        csrfmiddlewaretoken: '{{csrf_token}}',
                    }, 

            // handle a successful response
            success : function(data) {
                $("#compensation_value").html(data);
            },
        });
    };
</script>
