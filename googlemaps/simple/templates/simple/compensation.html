<head>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<form id="compensation_form" method="post">
    {% csrf_token %}
<!--     Choose the competency level:
    <select name="level">
        <option value="ceo">CEO/President</option>
        <option value="vp">VP</option>
        <option value="lead">Team Leader</option>
        <option value="professional">Professional</option>
    </select>
    <br/>
    <br/>
    Years of service:
    <input type="number" name="years" value="10"/>
    <br/>
 --> 
    <div>
        Minimum age:
        <output name="min_age" for="min_range">40</output>
        <br/>
        30
        <input type="range" name="min_range" min="30" max="80" value="40" oninput="min_age.value=min_range.value">
        80
    </div>
    <br/>
    <div>
        Maximum age:
        <output name="max_age" for="max_range">50</output>
        <br/>
        30
        <input type="range" name="max_range" min="30" max="80" value="50" oninput="max_age.value=max_range.value">
        80
    </div>
    <br/>
    <div>
        Years of service:
        <output name="service" for="service_range">10</output>
        <br/>
        0
        <input type="range" name="service_range" min="0" max="30" value="10" oninput="service.value=service_range.value">
        30
    </div>
    <br/>
    <div>
        Salary per year:
        <output name="salary" for="salary_range">70000</output>
        <br/>
        0
        <input type="range" name="salary_range" min="0" max="200000" value="70000" oninput="salary.value=salary_range.value">
        200000
        <br/> 
    </div>   
<!--     <input type="submit" value="Predict Compensation in Months">
    <br/>
 -->
</form>

The delay range is in between : <span id="min_delay"></span> and <span id="max_delay"></span>

<!-- <div id="plotly_json"></div> -->
<script>
    $("#compensation_form").change(function (event) {
      process_compensation();
      event.preventDefault();
    });

    function process_compensation()
    {
        console.log("Min age = ", $('[name="min_age"]').val());
        console.log("Max age = ", $('[name="max_age"]').val());
        console.log("Service range = ", $('[name="service"]').val());
        console.log("Salary = ", $('[name="salary"]').val());

        $.ajax(
        {
            url : "{% url 'process-compensation' %}", 
            type : "POST",
            data : {    
                        min_age: $('[name="min_age"]').val(),
                        max_age: $('[name="max_age"]').val(),
                        service: $('[name="service"]').val(),
                        salary : $('[name="salary"]').val(),
                        csrfmiddlewaretoken: '{{csrf_token}}',
                    }, 

            // handle a successful response
            success : function(raw) {
                $("#min_delay").html(raw.val_min);
                $("#max_delay").html(raw.val_max);
            },
        });
    };
</script>
